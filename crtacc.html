<!DOCTYPE html>
<html lang="fr">
<head>
    <script src="/articles/socket.io.js"></script>
    <!-- Mon stylesheet -->
    <link rel="stylesheet" href="./css/main.css">
    <!-- Mon js -->
    <script src="/js/main.js"></script>
    <!-- bootstrap (3) - pour le style de la page. -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'encyclopédie de l'info - Se connecter</title>
</head>
<body>
    <div class="alert alert-dismissible alert-info">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        <h3 id="info">Vous êtes sur une version <strong>experimentale</strong>  du site !</h3>
    </div>
    <div class="txt">
        <p>Remplissez les données suivantes pour se connecter:</p>
        <br>
        <p id="status"></p>
        <label for="text">Nom d'utilisateur</label>
        <input type="text" class="form-control" required id="nom" placeholder="Entrez ici...">
        <label for="mdp">Mot de passe:</label>
        <input type="password" class="form-control" id="mdp" required placeholder="Entrez ici...">
        <br>
        <button onclick="signinf();" class="btn-success bouton" value="Se connecter">S'inscrire</button>

    </div>
</body>
<script>
    const socket = io("http://109.17.132.241:3630");
    socket.emit("message","create accounter");
    function signinf(){
        const status = document.getElementById("status");
        const username = document.getElementById("nom").value;
        const mdp = document.getElementById("mdp").value;
        if (username === " " | mdp ===" "){
            status.style = "color: blue;";
            status.innerhtml = "Veuillez insérer <strong>des données</strong> dans les champs requis."
        }else{
            socket.emit("addaccount",username,mdp, (response) => {
                if (response == "200"){
                    status.style = "color: green;";
                    status.innerHTML = "Un grand <strong>Merci</strong> de vous être inscrit ! :) :)";
                }
                if (response == "same"){
                    status.style = "color: red;";
                    status.innerHTML = "<strong>Erreur:</strong> Un compte est sous le même nom d'utilisateur ou cet un nom d'administrateur";
                    username, mdp = "", "";

                }
            });
        }
    }
</script>
</html>